<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mobile First Dashboard</title>

  <!-- DaisyUI + Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.6.0/dist/full.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Handlebars.js -->
  <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>

  <style>
    body { background: #f3f4f6; }
  </style>
</head>

<body>

  <!-- Drawer Layout -->
  <div class="drawer lg:drawer-open">
    <input id="sidebarDrawer" type="checkbox" class="drawer-toggle" />

    <!-- Dynamic Header + Content -->
    <div class="drawer-content flex flex-col p-4" id="headerContainer"></div>

    <!-- Sidebar -->
    <div class="drawer-side" id="sidebarContainer"></div>
  </div>

  <!-- -------------------------------------------- -->
  <!--              HANDLEBARS TEMPLATES            -->
  <!-- -------------------------------------------- -->

  <!-- Sidebar Template -->
  <script id="sidebarTemplate" type="text/x-handlebars-template">
    <label for="sidebarDrawer" class="drawer-overlay"></label>

    <aside class="w-64 min-h-full bg-base-100 p-4 shadow">
      <h2 class="text-2xl font-bold mb-6">Menu</h2>

      <ul class="menu space-y-2">
        <li><a data-page="dashboard">Dashboard</a></li>
        <li><a data-page="analytics">Analytics</a></li>
        <li><a data-page="users">Users</a></li>
        <li><a data-page="settings">Settings</a></li>
        <li><a id="logoutBtnSidebar">Logout</a></li>
      </ul>
    </aside>
  </script>

  <!-- Header Template -->
  <script id="headerTemplate" type="text/x-handlebars-template">
    <div class="flex items-center justify-between mb-4">
      <label for="sidebarDrawer" class="btn btn-primary drawer-button lg:hidden">☰</label>
      <h1 class="text-xl font-bold">{{title}}</h1>

      <button id="logoutBtn" class="btn btn-error btn-sm hidden lg:flex">Logout</button>
    </div>

    <div id="contentContainer"></div>
  </script>

  <!-- Dashboard Template -->
  <script id="dashboardTemplate" type="text/x-handlebars-template">

    <!-- OVERVIEW -->
    <div class="bg-white p-4 rounded-xl shadow mb-4">
      <h2 class="text-lg font-semibold">Overview</h2>
      <p class="text-gray-600 mt-1">
        Welcome to your dashboard. Here is a quick look at all sections.
      </p>
    </div>

    <!-- ANALYTICS PREVIEW -->
    <div class="bg-white p-4 rounded-xl shadow mb-4">
      <h2 class="text-lg font-semibold">Analytics Summary</h2>
      <p class="text-gray-600 mt-1">
        Your recent activity statistics and performance insights.
      </p>
      <ul class="mt-2 text-gray-700">
        <li>• Weekly active users increased by 12%</li>
        <li>• Engagement rate: 68%</li>
        <li>• Bounce rate improved by 5%</li>
      </ul>
    </div>

    <!-- USERS PREVIEW -->
    <div class="bg-white p-4 rounded-xl shadow mb-4">
      <h2 class="text-lg font-semibold">Recent Users</h2>
      <p class="text-gray-600 mt-1">Latest users joined the system:</p>
      <ul class="mt-2 text-gray-700">
        <li>• John Doe — Joined today</li>
        <li>• Sarah Green — Joined yesterday</li>
        <li>• Amit Sharma — Joined this week</li>
      </ul>
    </div>

    <!-- SETTINGS PREVIEW -->
    <div class="bg-white p-4 rounded-xl shadow mb-4">
      <h2 class="text-lg font-semibold">Settings Preview</h2>
      <p class="text-gray-600 mt-1">Your current system preferences:</p>
      <ul class="mt-2 text-gray-700">
        <li>• Notification: Enabled</li>
        <li>• Dashboard theme: Light</li>
        <li>• Account type: Admin</li>
      </ul>
    </div>

  </script>

  <!-- Analytics Template -->
  <script id="analyticsTemplate" type="text/x-handlebars-template">
    <div class="bg-white p-4 rounded-xl shadow">
      <h2 class="text-lg font-semibold">Analytics</h2>
      <p class="text-gray-600 mt-1">Detailed analytics and data tracking.</p>
      <ul class="mt-2 text-gray-700">
        <li>• Total visitors this week: 5,230</li>
        <li>• New sign-ups: 422</li>
        <li>• Conversion rate: 14.2%</li>
        <li>• Time spent per user: 5m 45s</li>
      </ul>
    </div>
  </script>

  <!-- Users Template -->
  <script id="usersTemplate" type="text/x-handlebars-template">
    <div class="bg-white p-4 rounded-xl shadow">
      <h2 class="text-lg font-semibold">Users Management</h2>
      <p class="text-gray-600 mt-1">
        Manage, add, and remove users from this section.
      </p>

      <ul class="mt-2 text-gray-700">
        <li>• John Doe – Active</li>
        <li>• Priya Singh – Active</li>
        <li>• Michael Lee – Suspended</li>
        <li>• Asha Patel – Pending verification</li>
      </ul>
    </div>
  </script>

  <!-- Settings Template -->
  <script id="settingsTemplate" type="text/x-handlebars-template">
    <div class="bg-white p-4 rounded-xl shadow">
      <h2 class="text-lg font-semibold">Settings</h2>
      <p class="text-gray-600 mt-1">Customize your dashboard experience.</p>

      <ul class="mt-2 text-gray-700">
        <li>• Enable notifications</li>
        <li>• Change theme (Dark / Light)</li>
        <li>• Update profile information</li>
        <li>• Change password</li>
      </ul>
    </div>
  </script>

  <!-- -------------------------------------------- -->
  <!--                 JAVASCRIPT                   -->
  <!-- -------------------------------------------- -->
  <script>
    // Compile Handlebars templates
    const sidebarHTML = Handlebars.compile(document.getElementById("sidebarTemplate").innerHTML);
    const headerHTML = Handlebars.compile(document.getElementById("headerTemplate").innerHTML);

    const dashboardHTML = Handlebars.compile(document.getElementById("dashboardTemplate").innerHTML);
    const analyticsHTML = Handlebars.compile(document.getElementById("analyticsTemplate").innerHTML);
    const usersHTML = Handlebars.compile(document.getElementById("usersTemplate").innerHTML);
    const settingsHTML = Handlebars.compile(document.getElementById("settingsTemplate").innerHTML);

    // Inject Sidebar
    document.getElementById("sidebarContainer").innerHTML = sidebarHTML();

    // Default page
    loadPage("dashboard");

    // Load pages dynamically
    function loadPage(page) {
      let title = "Dashboard";
      let content = "";

      if (page === "dashboard") content = dashboardHTML();
      if (page === "analytics") {
        title = "Analytics";
        content = analyticsHTML();
      }
      if (page === "users") {
        title = "Users";
        content = usersHTML();
      }
      if (page === "settings") {
        title = "Settings";
        content = settingsHTML();
      }

      document.getElementById("headerContainer").innerHTML = headerHTML({ title });
      document.getElementById("contentContainer").innerHTML = content;

      attachSidebarEvents();
      attachLogoutEvents();
    }

    // Sidebar navigation
    function attachSidebarEvents() {
      document.querySelectorAll("[data-page]").forEach(link => {
        link.addEventListener("click", () => loadPage(link.dataset.page));
      });
    }

    // Logout events
    function attachLogoutEvents() {
      const btn1 = document.getElementById("logoutBtn");
      const btn2 = document.getElementById("logoutBtnSidebar");

      [btn1, btn2].forEach(btn => {
        if (btn) {
          btn.addEventListener("click", () => {
            if (confirm("Are you sure you want to logout?")) {
              alert("Logged out successfully!");
              window.location.href = "/login";
            }
          });
        }
      });
    }
  </script>

</body>
</html>